# 高级光照计算

使用razor页面`AdvancedCalculator.razor`实现光照计算功能, 使用纯JS代码实现

## 基础数据

收集地区经纬度(可以让客户选择地区或者直接输入经纬度)

## 高级数据

支持用户通过网页画出多个楼栋(支持配置每个楼栋的总高度, 层高信息), 用户可以调整已有的楼层朝向
在绘制楼栋的过程中,可以自动标注出楼栋的宽度和长度(楼栋总高度通过手动输入)
绘制楼栋的画布默认为上北下南
通过绘制的楼栋信息, 用户可以选择其中一栋楼的某一层, 计算盖楼层的采光情况
绘制的画布在界面中站主要位置, 支持配置比例尺(默认单位是10米), 精度最小到0.1单位
需要给楼房引入单元逻辑, 等比例将房屋的宽度分为多个单元, 计算光照的时候需要当前单元位置的遮挡情况 如果被其它楼栋遮挡,则不能计入光照时间, 如果光照极低也不能计入. 计算光照以楼层+单元为最小单元

可后续改进:

显示所有单元日照对比表。
支持导出所有楼栋的光照信息CSV
支持导入/导出楼栋信息
3D视图支持单元热力图 (在楼块上着色, 光照越多颜色越红)。
可调“低太阳高度阈值”。

### 采光

指当太阳升起到落下这段时间可以直射到该楼层的时间, 要考虑到周围的建筑物遮挡情况
太阳的升起落下和太阳的入射角方位需要通过经纬度和时间计算

## 结果

通过这些用户输入信息计算客户的全年采光情况(全年总日照时间, 改楼层有采光时间)和春分, 夏至, 秋分, 冬至的采光情况
